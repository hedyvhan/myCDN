---
title:  使用iOS快捷指令和飞书云文档实现快捷记账和资产管理
date: '2023-12-15 16:26:07(创建时间)'
tags: 飞书
categories: 飞书
abbrlink: 60210
---

# 使用iOS快捷指令和飞书云文档实现快捷记账和资产管理

> 上一篇链接丢失，有私信不是很清楚，这次补齐了，并附带自用的快捷指令

## 痛点

在一次刷小红书的时候发现有博主实现了通过快捷指令和飞书云文档实现快捷记账功能，评论求快捷指令，居然要私信加群，加群一看居然要花15块钱购买！！！这怎么能忍！！！！！身为一个工科程序员这怎么能忍，正好自己有使用飞书all in one，快捷指令也有折腾，直接光速自己折腾出来。

## 需求

敲击手机背面，通过快捷指令自动记录每次花销，并在飞书文档后台实时查看各种费用可视化。

## 解决方案

1. 在飞书云文档建立一个飞书多维表格。表格字段可以自己设定，包含金额、分类、时间（可以在修改字段里默认选择为生成记录时候的时间）等。
2. 快捷指令：
    1. 里通过截屏识别文字，实现获取当前的账单价格。可以通过正则筛选出需要的账单数据。将价格保存到变量中。
    2. 通过飞书open-api接口，给定请求头和请求体，通过post请求，直接新增一条记录。这一步稍微复杂一些，这里给出[新增记录的接口api文档](https://open.feishu.cn/document/server-docs/docs/bitable-v1/app-table-record/create)。
    3. 请求头：在请求头中的Authorization的参数access_token，需要通过appId和appsSecret通过另一个接口获得，可以点击接口文档中的链接获取。app_token和table_id分别表示**多维表格**的标识符和**多维表格数据表**的标识符（一个多维表格可能有多个数据表），通过这两个参数定位到储存记账数据的表格。可以细看如何获取app_token和table_id。
    4. 请求体：按照接口文档的示例进行封装即可。注意字段的类型。
    5. 封装完成之后，便可以发送请求。

[自用的快捷指令的链接](https://www.icloud.com/shortcuts/8c2b8ef136374f3484081aba24a35a32)放在文章后面，只需要将其中的appId、appsSecret、access_token、table_id改为自己的就行。怎么找到这些参数，如上面第三点说的。
